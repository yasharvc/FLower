
@{
	Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>@ViewData["Title"] - Flower web application</title>
	<link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900|Material+Icons|Material+Icons+Outlined|Material+Icons+Round|Material+Icons+Sharp" rel="stylesheet" type="text/css">
	<link href="https://cdn.jsdelivr.net/npm/@@mdi/font@@^5.0.0/css/materialdesignicons.min.css" rel="stylesheet" type="text/css">
	<link href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" rel="stylesheet" type="text/css">
	<link href="https://cdn.jsdelivr.net/npm/ionicons@@^4.0.0/dist/css/ionicons.min.css" rel="stylesheet" type="text/css">
	<link href="https://cdn.jsdelivr.net/npm/eva-icons@@^1.0.0/style/eva-icons.css" rel="stylesheet" type="text/css">
	<link href="https://themify.me/wp-content/themes/themify-v32/themify-icons/themify-icons.css" rel="stylesheet" type="text/css">
	<link href="https://maxst.icons8.com/vue-static/landings/line-awesome/font-awesome-line-awesome/css/all.min.css" rel="stylesheet" type="text/css">
	<link href="https://cdn.jsdelivr.net/npm/animate.css@@^4.0.0/animate.min.css" rel="stylesheet" type="text/css">
	<link href="https://cdn.jsdelivr.net/npm/quasar@@1.12.1/dist/quasar.rtl.min.css" rel="stylesheet" type="text/css">
	<script src="~/application/fileutil.js"></script>
</head>
<body>
	<script>
		window.quasarConfig = {
			//brand: { primary: '#e46262' },
			//notify: { ...}, // default set of options for Notify Quasar plugin
			//loading: { ...}, // default set of options for Loading Quasar plugin
			//loadingBar: { ... }, // settings for LoadingBar Quasar plugin
			// ..and many more (check Installation card on each Quasar component/directive/plugin)
		}
	</script>
	<script src="https://cdn.jsdelivr.net/npm/quasar@@1.12.1/dist/quasar.ie.polyfills.umd.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/vue@@^2.0.0/dist/vue.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/quasar@@1.12.1/dist/quasar.umd.modern.min.js"></script>

	<div id="topmenu">
		<template>
			<q-layout view="hHh LpR fFf">

				<q-header reveal elevated class="bg-primary text-white" height-hint="98">
					<q-toolbar>
						<q-btn dense flat round icon="menu" @@click="left = !left"></q-btn>

						<q-toolbar-title>
							<q-avatar>
								<img src="https://cdn.quasar.dev/logo/svg/quasar-logo.svg">
							</q-avatar>
							Flower
						</q-toolbar-title>

						@*<q-btn dense flat round icon="menu" @@click="right = !right"></q-btn>*@
					</q-toolbar>

					<q-tabs align="center">
						<q-tab v-for="t in tabs" :label="t.title" @@click="changeTab(t.tabIndex)"></q-tab>
					</q-tabs>
				</q-header>

				<q-drawer show-if-above v-model="left" side="left" behavior="desktop" bordered>
					<q-scroll-area class="fit" style="height: calc(100% - 150px); margin-top: 150px; border-right: 1px solid #ddd">
						<q-list v-for="(menuItem, index) in menuList" :key="index">

							<q-item clickable :active="menuItem.label === 'Outbox'" @@click="menuClick(menuItem.id)" v-ripple>
								<q-item-section avatar>
									<q-icon :name="menuItem.icon" />
								</q-item-section>
								<q-item-section>
									{{ menuItem.label }}
								</q-item-section>
							</q-item>

							<q-separator v-if="menuItem.separator" />

						</q-list>
					</q-scroll-area>
					<q-img class="absolute-top" src="https://cdn.quasar.dev/img/material.png" style="height: 150px">
						<div class="absolute-bottom bg-transparent">
							<q-avatar size="56px" class="q-mb-sm">
								<img src="https://cdn.quasar.dev/img/boy-avatar.png">
							</q-avatar>
							<div class="text-weight-bold">Razvan Stoenescu</div>
							<div>@@rstoenescu</div>
						</div>
					</q-img>
				</q-drawer>

				<!-- <q-drawer show-if-above v-model="right" side="right" bordered>
				drawer content
					</q-drawer> -->

				<q-page-container>
					<div class="q-pa-md q-gutter-sm" id="pages">
						@*<gcse:search v-pre id="xyz">
								<div v-if="myTab==topmenu.tab">
									Hi {{test}}
									<q-input filled v-model="test" label="Filled" />
								</div>
							</gcse:search>

							<gcse:search v-pre id="zxy">
								<div v-if="myTab==topmenu.tab">
									Guten tag {{test}}!
									<q-input filled v-model="test" label="Filled" />
								</div>
							</gcse:search>*@
					</div>
				</q-page-container>
			</q-layout>
		</template>
	</div>
	<script>
		const tabs = [
		];
		const menuList = [
			{
				icon: 'inbox',
				label: 'Inbox',
				separator: true,
				link: '/pages/index?id=xyz',
				id: 1
			},
			{
				icon: 'send',
				label: 'Outbox',
				separator: false,
				link: '/pages/index?id=abc',
				id: 2
			},
			{
				icon: 'delete',
				label: 'Trash',
				separator: false,
				link: '/pages/index?id=tree',
				id: 3
			},
			{
				icon: 'error',
				label: 'Spam',
				separator: true,
				link: '/pages/index?id=iii',
				id: 4
			},
			{
				icon: 'settings',
				label: 'Settings',
				separator: false,
				link: '/pages/index?id=tyr',
				id: 5
			},
			{
				icon: 'feedback',
				label: 'Send Feedback',
				separator: false,
				link: '/pages/index?id=oio',
				id: 6
			},
			{
				icon: 'help',
				iconColor: 'primary',
				label: 'Help',
				separator: false,
				link: '/pages/index?id=trrtg',
				id: 7
			}
		]
		var topmenu = new Vue({
			el: '#topmenu',
			data: function () {
				return {
					left: false,
					menuList,
					tab: 0,
					tabs
				};
			},
			methods: {
				changeTab: function (index) {
					this.tab = parseInt(index);
					console.log(index);
				},
				isTab: function (index) {
					debugger;
					return this.tab == index;
				},
				menuClick: function (id) {
					this.tabs.push({
						tabIndex: parseInt(id),
						title: menuList[id - 1].label
					});

					setTimeout(function () {
						var pages = document.getElementById('pages');
						readHTML(menuList[id - 1].link + '&index=' + id, function (d, content) {
							var scripts = getScripts(content);
							pages.appendChild(makePage('_rr' + id, content));
							scripts.forEach(m => eval(m));
						});
					}, 100);
				}
			}
		});
function getScripts(tes) {
	var res = [];
	var start = 0;
	var end = 0;

	while (true) {
		start = tes.indexOf('<' + 'script>', end);
		if (start == -1)
			return res;
		start += 'lscriptl'.length
		end = tes.indexOf('</' + 'script>', start);
		if (end == -1)
			return res;
		res.push(tes.substring(start, end));
	}
}

	function makePage(id, innerHTML) {
	var el = document.createElement('gcse:search');
	el.setAttribute("v-pre", "");
	//el.id = id;
	el.innerHTML = innerHTML;
	return el;
	}

	//var app = new Vue({
	//	el: '#xyz',
	//	data: function () {
	//		return {
	//			test: 'name',
	//			myTab: 1
	//		};
	//	}
	//});
	//var app2 = new Vue({el: '#zxy',data: function () {return {test: 'Yashar',myTab: 2};}});
	</script>
</body>
</html>
